%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                    ATRIBUIÇÃO DE CÓDIGOS À CARACTERES                       %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Nossos códigos de categoria são iguais aos do Plain TeX, exceto por
% não suportarmos os caracteres ASCII de seta para cima e para baixo
% como sobrescrito e subscrito. Atualmente não há teclados com tais
% símbolos sendo encontrados por aí.
\catcode`\{=1
\catcode`\}=2
\catcode`\$=3
\catcode`\&=4
\catcode`\#=6
\catcode`\^=7
\catcode`\_=8
\catcode`\^^I=10
\catcode`\~=13
% Assim como na definição do Plain TeX, vamos reservar o @ para atuar
% temporariamente como letra e assim podermos reservar comandos
% privados que terão '@' no nome e que não poderão ser geralmente
% sobrescritos ou usados por um usuário. Depois faremos com que o @
% volte a ser uma marca de pontuação.
\catcode`@=11
% O seguinte catcode nos ajuda a interpretar caracteres UTF-8:
\catcode`\^^c3=13

% Usamos as mesmas configurações do fator de espaço que o Plain TeX. O
% espaço após o ')' é igual ao espaço do que vem antes dele, e o mesmo
% ocorre com aspas e fechamento de colchetes. Adotamos por padrão as
% convenções do \nonfrenchspacing
\sfcode`\)=0 \sfcode`\'=0 \sfcode`\]=0 \sfcode`\.3000 \sfcode`\?3000
\sfcode`\!3000 \sfcode`\:2000 \sfcode`\;1500 \sfcode`\,1250

% O Plain TeX não faz modificações na tabela padrão de conversão de
% caracteres maiúsculos e minúsculos. Mas aqui é necessário
% adicionarmos novos itens à tabela para que possamos converter para
% maiúscula e minúscula os caracteres UTF-8 que representam letras
% acentuadas. Todos eles começam com o byte ^^c3 de prefixo que nunca
% muda. O caractere seguinte define qual caractere unicode ele é.
\lccode`^^c3=`^^c3\uccode`^^c3=`^^c3 % Prefixo
\lccode`^^80=`^^a0\uccode`^^a0=`^^80\lccode`^^a0=`^^a0\uccode`^^80=`^^80 % À - à
\lccode`^^81=`^^a1\uccode`^^a1=`^^81\lccode`^^a1=`^^a1\uccode`^^81=`^^81 % Á - á
\lccode`^^82=`^^a2\uccode`^^a2=`^^82\lccode`^^a2=`^^a2\uccode`^^82=`^^82 % Â - â
\lccode`^^83=`^^a3\uccode`^^a3=`^^83\lccode`^^a3=`^^a3\uccode`^^83=`^^83 % Ã - ã
\lccode`^^84=`^^a4\uccode`^^a4=`^^84\lccode`^^a4=`^^a4\uccode`^^84=`^^84 % Ä - ä
\lccode`^^85=`^^a5\uccode`^^a5=`^^85\lccode`^^a5=`^^a5\uccode`^^85=`^^85 % AA-aa
\lccode`^^86=`^^a6\uccode`^^a6=`^^86\lccode`^^a6=`^^a6\uccode`^^86=`^^86 % AE-ae
\lccode`^^87=`^^a7\uccode`^^a7=`^^87\lccode`^^a7=`^^a7\uccode`^^87=`^^87 % Ç - ç
\lccode`^^88=`^^a8\uccode`^^a8=`^^88\lccode`^^a8=`^^a8\uccode`^^88=`^^88 % È - è
\lccode`^^89=`^^a9\uccode`^^a9=`^^89\lccode`^^a9=`^^a9\uccode`^^89=`^^89 % É - é
\lccode`^^8a=`^^aa\uccode`^^aa=`^^8a\lccode`^^aa=`^^aa\uccode`^^8a=`^^8a % Ê - ê
\lccode`^^8b=`^^ab\uccode`^^ab=`^^8b\lccode`^^ab=`^^ab\uccode`^^8b=`^^8b % Ë - ë
\lccode`^^8c=`^^ac\uccode`^^ac=`^^8c\lccode`^^ac=`^^ac\uccode`^^8c=`^^8c % Ì - ì
\lccode`^^8d=`^^ad\uccode`^^ad=`^^8d\lccode`^^ad=`^^ad\uccode`^^8d=`^^8d % Í - í
\lccode`^^8e=`^^ae\uccode`^^ae=`^^8e\lccode`^^ae=`^^ae\uccode`^^8e=`^^8e % Î - î
\lccode`^^8f=`^^af\uccode`^^af=`^^8f\lccode`^^af=`^^af\uccode`^^8f=`^^8f % Ï - ï
\lccode`^^91=`^^b1\uccode`^^b1=`^^91\lccode`^^b1=`^^b1\uccode`^^91=`^^91 % Ñ - ñ
\lccode`^^92=`^^b2\uccode`^^b2=`^^92\lccode`^^b2=`^^b2\uccode`^^92=`^^92 % Ò - ò
\lccode`^^93=`^^b3\uccode`^^b3=`^^93\lccode`^^b3=`^^b3\uccode`^^93=`^^93 % Ó - ó
\lccode`^^94=`^^b4\uccode`^^b4=`^^94\lccode`^^b4=`^^b4\uccode`^^94=`^^94 % Ô - ô
\lccode`^^95=`^^b5\uccode`^^b5=`^^95\lccode`^^b5=`^^b5\uccode`^^95=`^^95 % Õ - õ
\lccode`^^96=`^^b6\uccode`^^b6=`^^96\lccode`^^b6=`^^b6\uccode`^^96=`^^96 % Ö - ö
\lccode`^^98=`^^b8\uccode`^^b8=`^^98\lccode`^^b8=`^^b8\uccode`^^98=`^^98 % /O-/o
\lccode`^^99=`^^b9\uccode`^^b9=`^^99\lccode`^^b9=`^^b9\uccode`^^99=`^^99 % Ù - ù
\lccode`^^9a=`^^ba\uccode`^^ba=`^^9a\lccode`^^ba=`^^ba\uccode`^^9a=`^^9a % Ú - ú
\lccode`^^9b=`^^bb\uccode`^^bb=`^^9b\lccode`^^bb=`^^bb\uccode`^^9b=`^^9b % Û - û
\lccode`^^9c=`^^bc\uccode`^^bc=`^^9c\lccode`^^bc=`^^bc\uccode`^^9c=`^^9c % Ü - ü
\lccode`^^9d=`^^bd\uccode`^^bd=`^^9d\lccode`^^bd=`^^bd\uccode`^^9d=`^^9d % Ý - ý

% Os códigos dos caracteres matemáticos não serão modificados. Como o
% modo matemático do TeX e LaTeX são em si mesmo uma linguagem própria
% já muito difundida, não pretendendo realizar nenhuma mudança nem
% aqui e nem em nenhum outro lugar referente ao modo matemático. Os
% caracteres definidos terão o mesmo código do Apêndice C do
% Texbook. Tal \mathcode é usado para definir o comportamento da
% tipografia de tais símbolos, a sua fonte e sua posição
% específica. Alguns caracteres como ' também passam a ser
% considerados caracteres especiais.
\mathcode`\^^@="2201 % \cdot
\mathcode`\^^A="3223 % \downarrow
\mathcode`\^^B="010B % \alpha
\mathcode`\^^C="010C % \beta
\mathcode`\^^D="225E % \land
\mathcode`\^^E="023A % \lnot
\mathcode`\^^F="3232 % \in
\mathcode`\^^G="0119 % \pi
\mathcode`\^^H="0115 % \lambda
\mathcode`\^^I="010D % \gamma
\mathcode`\^^J="010E % \delta
\mathcode`\^^K="3222 % \uparrow
\mathcode`\^^L="2206 % \pm
\mathcode`\^^M="2208 % \oplus
\mathcode`\^^N="0231 % \infty
\mathcode`\^^O="0140 % \partial
\mathcode`\^^P="321A % \subset
\mathcode`\^^Q="321B % \supset
\mathcode`\^^R="225C % \cap
\mathcode`\^^S="225B % \cup
\mathcode`\^^T="0238 % \forall
\mathcode`\^^U="0239 % \exists
\mathcode`\^^V="220A % \otimes
\mathcode`\^^W="3224 % \leftrightarrow
\mathcode`\^^X="3220 % \leftarrow
\mathcode`\^^Y="3221 % \rightarrow
\mathcode`\^^Z="8000 % \ne
\mathcode`\^^[="2205 % \diamond
\mathcode`\^^\="3214 % \le
\mathcode`\^^]="3215 % \ge
\mathcode`\^^^="3211 % \equiv
\mathcode`\^^_="225F % \lor
\mathcode`\ ="8000 % \space
\mathcode`\!="5021
\mathcode`\'="8000 % ^\prime
\mathcode`\(="4028
\mathcode`\)="5029
\mathcode`\*="2203 % \ast
\mathcode`\+="202B
\mathcode`\,="613B
\mathcode`\-="2200
\mathcode`\.="013A
\mathcode`\/="013D
\mathcode`\:="303A
\mathcode`\;="603B
\mathcode`\<="313C
\mathcode`\=="303D
\mathcode`\>="313E
\mathcode`\?="503F
\mathcode`\[="405B
\mathcode`\\="026E % \backslash
\mathcode`\]="505D
\mathcode`\_="8000 % \_
\mathcode`\{="4266
\mathcode`\|="026A
\mathcode`\}="5267
\mathcode`\^^?="1273 % \smallint

% Assim como Plain TeX, usamos exatamente as mesmas escolhas de
% caracteres como delimitadores em modo matemático. Tem também
% o \delcode'.=0 que já está implícito pelo INITEX:
\delcode`\(="028300
\delcode`\)="029301
\delcode`\[="05B302
\delcode`\]="05D303
\delcode`\<="26830A
\delcode`\>="26930B
\delcode`\/="02F30E
\delcode`\|="26A30C
\delcode`\\="26E30F

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                    ATRIBUIÇÃO DE PARÂMETROS INTERNOS                        %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Parâmetros inteiros
\pretolerance=100 % Tolerância da 1a tentativa de gerar parágrafo sem \-
\tolerance=200    % Tolerância final de parágrafos.
\hbadness=1000    % Badness com valor tão alto sempre é reportada
\vbadness=1000    % Idem, mas no modo vertical

\linepenalty=10     % Ampliar isso reduz o  número de linhas
\hyphenpenalty=50   % Penalidade de separação silábica na quebra de linha
\exhyphenpenalty=50 % Idem, mas no caso em que a palavra muda na quebra
\binoppenalty=700   % Dificuldade de quebra de linha após operadores matemáticos
\relpenalty=500     % Idem, mas após operadores de relação como >
\clubpenalty=150    % Penalidade de quebra de página após 1a linha de parágrafo
\widowpenalty=150   % Idem, mas antes da última linha de parágrafo
\displaywidowpenalty=50 % Penalidade da penúltima linha antes de display
\brokenpenalty=100  % Penalidade vertical de separação silábica na
                    % penúltima linha
\predisplaypenalty=10000 % Penalidade de quebra antes de equações em
                        % display
\postdisplaypenalty=0 % Penalidade após um display matemático
\interlinepenalty=0   % Penalidade de quebra de página entre linhas
                      % comuns
\floatingpenalty=0  % Este valor é mudado em cada inserção
\outputpenalty=0    % E este é ajustado em cada saída.
\doublehyphendemerits=10000 % Deméritos adicionados se duas linhas
                            % seguidas separam sílabas
\finalhyphendemerits=5000 % Deméritos adicionais se penúltima linha
                          % separa sílabas
\adjdemerits=10000 % Deméritos adicionais se duas linhas seguidas são
                   % visualmente incompatíveis

\looseness=0 % Ajustado para 0 depois de cada parágrafo. Tenta tornar
             % o parágrafo atual o seu valor mais longo em número de
             % linhas.
\pausing=0   % Se precisamos pausar após ler cada linha de arquivo

\holdinginserts=0 % Se maior que 0, as inserções feitas são
                  % permanentes em cada página

\tracingonline=0 % Se positivo, mensagens de depuração vão pro terminal
\tracingmacros=0 % Se positivo, gera mensagem de depuração de macros
\tracingstats=0 % Se positivo, gera depuração de quanta memória é usada
\tracingparagraphs=0 % Se positivo, mostra depuração sobre tentativas
                     % de gerar parágrafo
\tracingpages=0 % Se positivo, mostra depuração sobre tentativas de
                % quebrar página
\tracingoutput=0 % Se positivo, gera depuração da caixa que vai pra \output
\tracinglostchars=1 % Se positivo, gera avisos sobre caracteres não
                    % encontrados na fonte atual
\tracingcommands=0 % Se positivo, mostra os comandos que vão sendo
                   % executados
\tracingrestores=0 % Se positivo, mostra todas as variáveis que tem
                   % seus valores restaurados no fim de um agrupamento

\language=0 % A linguagem usada.
\uchyph=1 % Positivo se deve-se separar silabicamente palavras que
          % começam com letras maiúsculas
\lefthyphenmin=2 % Menor fragmento esquerdo de palavras com separação
                 % silábica.
\righthyphenmin=3 % Idem, mas para fragmento direito

\globaldefs=0 % Não-nulo para tornar toda atribuição \global

\maxdeadcycles=25 % Número máximo de loops de geração de páginas sem
                  % que nenhuma página seja gerada

\hangafter=1 % Define que as linhas em que haverá
             % identação \hangindent serão as linhas 2, 3, 4, ...

\fam=0 % Fonte padrão de modo matemático

\mag=1000 % Ampliação inicial

\escapechar=`\\ % Caractere de escape
\defaultskewchar=-1
\endlinechar=`\^^M % Caractere de fim de linha
\newlinechar=-1
\delimiterfactor=901 % Para escolher tamanho de delimitadores grandes
                     % em modo matemático
%\time=now % TeX deve atribuir isso automaticamente
%\day=now % TeX deve atribuir isso automaticamente
%\month=now % TeX deve atribuir isso automaticamente
%\year=now % TeX deve atribuir isso automaticamente
\showboxbreadth=5 % Número máximo de itens exibidos quando caixas são
                  % mostradas
\showboxdepth=3   % Nível máximo quando caixas são mostradas
\errorcontextlines=0 % Contexto extra máximo mostrado quando erros são

                     % mostrados
% Parâmetros de dimensões:
\hfuzz=0.1pt % Tolerância à caixas superlotadas em modo horizontal
\vfuzz=0.1pt % Idem no modo vertical
\overfullrule=5pt % Largura das réguas adicionadas à caixas superlotadas
\hsize=6.5in % Tamanho das linhas
\vsize=8.9in % Altura de todas as linhas de uma página
\maxdepth=4pt % profundidade máxima em páginas principais
\splitmaxdepth=16383.99999pt % Idem em páginas quebradas (tamanho máximo)
\boxmaxdepth=16383.99999pt % Idem em páginas explícitas (tamanho máximo)
\lineskiplimit=0pt % Distância limítrofe entre duas linhas
\delimitershortfall=5pt % Espaço máximo não coberto por um delimitador
\nulldelimiterspace=1.2pt % Largura de um delimitador nulo
\scriptspace=0.5pt % Espaço extra após sobrescritos e subscritos
\mathsurround=0pt % Espaço antes e depois de modo matemático
\predisplaysize=0pt % Largura de texto precedendo um display,
                    % preenchido automaticamente
\displaywidth=0pt % Altura de texto precedendo o display, preenchido
                  % automaticamente
\displayindent=0pt % Identação de linha de display, preenchido
                   % automaticamente
\parindent=20pt % Identação de parágrafo
\hangindent=0pt % Identação pendente, zerada após cada parágrafo
\hoffset=0pt % Deslocamento horizontal de texto da página
\voffset=0pt % Deslocamento vertical de texto na página
% Parâmetros de cola:
\baselineskip=12pt % Distância ideal entre linhas
\lineskip=1pt % Distância garantida entre linhas em distância
              % limítrofe
\parskip=0pt plus 1pt % Cola entre parágrafos
\abovedisplayskip=12pt plus 3pt minus 9pt % Cola antes de displays
\abovedisplayshortskip=0pt plus 3pt % Idem, mas após linhas curtas
\belowdisplayskip=12pt plus 3pt minus 9pt % Cola após displays
\belowdisplayshortskip=7pt plus 3pt minus 4pt % Idem, mas antes de
                                % linha curta
\leftskip=0pt % Cola à esquerda de linhas justificadas
\rightskip=0pt % Cola à direita de linhas justificadas
\topskip=10pt % Cola no topo de páginas
\splittopskip=10pt % Cola no topo de páginas quebradas
\tabskip=0pt % Cola entre &
\spaceskip=0pt % Cola entre palavras, se não-nulo
\xspaceskip=0pt % Cola entre frases, se não-nulo.
\parfillskip=0pt plus 1fil % Cola à direita adicional na última linha
                           % de parágrafos
% Parâmetros de cola mu:
\thinmuskip=3mu % Espaço pequeno em fórmulas matemáticas
\medmuskip=4mu plus 2mu minus 4mu % Espaço médio em fórmulas matemáticas
\thickmuskip=5mu plus 5mu % Espaço grande em fórmulas matemáticas
% Parâmetros de lista de tokens:
\everypar{} % A ser executado em cada parágrafo
\everymath{} % A ser executado em cada modo matemático
\everydisplay{} % A ser executado em cada display
\everyhbox{} % A ser executado em cada hbox
\everyjob{} % A ser executado no preâmbulo de cada trabalho
\everycr{} % A ser executado em cada \cr ou \crcr não-ignorado
\errhelp{} % A ser executado após erros
%%%%%%%%%%%%%%%%%%%%%%%%%%%% ROTINA DE SAÍDA %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\output{\shipout\vbox{\vbox to 0pt{\vskip-22.5pt
  \hbox to\hsize{% Início da headline
  \vbox to 8.5pt{}\the\headline}\vss}\prevdepth-1000pt%
  % Corpo:
  \vbox to\vsize{\boxmaxdepth\maxdepth
   \ifvoid\topins@\else\unvbox\topins@\fi
   \dimen0=\dp255 \unvbox255 % open up \box255
   \ifvoid\footins@\else % footnote info is present
     \vskip\skip\footins@%
     \kern-3pt\hrule width 2truein \kern 2.6pt % footnoterule
     \unvbox\footins@\fi
   \ifr@ggedbottom \kern-\dimen0 \vfil \fi}%
  % Rodapé:
  \baselineskip24pt\lineskiplimit\z@\hbox to\hsize{\the\footline}}%
  % Lógica do número de página
  \ifnum\pageno@<0 \global\advance\pageno@ by -1
  \else\global\advance\pageno@ by 1 \fi
  \ifnum\outputpenalty>-20000 \else%
  % Supereject:
  \ifnum\insertpenalties>0 % something is being held over
    \hbox to\hsize{}\kern-\topskip\nobreak\vfill\supereject\fi%
  \fi}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                               REGISTRADORES                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% magitex assume que registradores devem ser tratados apenas por
% escritores de formato e pessoas que sabem bem o que estão fazendo. E
% que cada formato deve documentar quais registradores usa. Comandos
% do Plain TeX como \newcount podem ser abusados e podem exaurir o
% espaço de registradores. Então será proposital não
% declararmos \newcount, \newskip e outros comandos para dar nomes à
% registradores sem especificar os números.

% Os registradores de contagem de 0 à 9 são reservados. O 0 é o número
% da página. O registrador 254 também é usado para o fator do quando
% cada linha da inserção \footins@ afeta o espaço da página. Os demais
% só são usados em formatos que de alguma forma precisam numerar
% sub-páginas e não serão usados. Depois deles nós temos:
\countdef\pageno@=0 \pageno@=1 % O número de página
\countdef\mscount=10
\countdef\count@=11
% 254 reservado para \footins

% Não há nenhum registrador de dimensão alocado pelas primitivas
% TeX. Desta forma, temos todos à nossa disposição:
\dimendef\z@=0 \z@=0pt % can be used both for 0pt and 0
\dimendef\jot=1 \jot=3pt
\dimendef\p@renwd=2
\dimendef\dimen@=3
\dimendef\dimen@i=4
\dimendef\dimen@ii=5
% 253 reservado para inserção \topins@
% 254 reservado para inserção \footins@

% Os registradores de skip. Nenhum é reservado e todos estão à
% disposição:
\skipdef\hideskip=0 \hideskip=-1000pt plus 1fill % negative but can grow
\skipdef\centering=1 \centering=0pt plus 1000pt minus 1000pt
\skipdef\z@skip=2 \z@skip=0pt plus0pt minus0pt
\skipdef\skip@=3
% 253 reservado para inserção \topins@
% 254 reservado para inserção \footins@

% Nenhum registrador de muskip é usado

% Registradores de caixa estão todos à disposição, exceto o de número
% 255:
\def\voidb@x{0} % permanently void box register
\def\strutbox{1} \setbox\strutbox=\hbox{\vrule height8.5pt depth3.5pt
  width0pt}
\def\tabs{2}
\def\tabsyet{3}
\def\tabsdone{4}
\def\rootbox{5}
% 253 reservado para inserção \topins@
% 254 reservado para inserção \footins@

% Agora reservamos os registradores de sequências de tokens:
\toksdef\headline=0 \headline={\hfil} % Cabeçalho padrão em branco
\toksdef\footline=1 \footline={\hss\tenrm@\folio\hss} % Rodapé padrão

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                ATRIBUIÇÕES                                  %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Começamos com as sequências de controle que também são padrão no
% Plain TeX:
\def~{\penalty10000 \ }

% Código para suportar os caracteres Computer Modern na fonte
% UTF-8. Primeiro fazemos com que ^^c3 passe a ser um caractere ativo
% que passa a se comportar como um comando (tal como o ~). Este
% caractere é o prefixo de tudo quanto é letra acentuada e Cs com
% cedilhas. Em seguida, definimos o ``comando'' ^^c3 para olhar pelo
% caractere seguinte e, baseado nele, inserir o caractere adequado.
%TODO: ç e Ç sem \c
\def^^c3#1{\relax% Este \relax é para evitar bugs se usado em \halign (TeXbook)
        \ifx#1^^80\ifmmode{\hbox{\tenit@\accent18A}}\else{\accent18A}\fi% À
        \else\ifx#1^^81\ifmmode{\acute A}\else{\accent19A}\fi% Á
        \else\ifx#1^^82\ifmmode{\hat A}\else{\accent94A}\fi% Â
        \else\ifx#1^^83\ifmmode{\tilde A}\else{\accent"7EA}\fi% Ã
        \else\ifx#1^^84\ifmmode{\ddot A}\else{\accent"7FA}\fi% Ä
        \else\ifx#1^^85\ifmmode{\hbox{\tenit@\AA}}\else{\AA}\fi
        \else\ifx#1^^86\ifmmode{\hbox{\tenit@\char"1D}}\else\char"1D\fi
        \else\ifx#1^^87\ifmmode\hbox{\tenit@\c C}\else\c C{}\fi % TODO
        \else\ifx#1^^88\ifmmode\hbox{\accent18E}\else{\accent18E}\fi%
        \else\ifx#1^^89\ifmmode{\acute E}\else{\accent19E}\fi% É
        \else\ifx#1^^8a\ifmmode{\hat E}\else{\accent94E}\fi% Ê
        \else\ifx#1^^8b\ifmmode{\ddot E}\else{\accent"7FE}\fi% Ë
        \else\ifx#1^^8c\ifmmode\hbox{\tenit@\accent18I}\else{\accent18I}\fi% Ì
        \else\ifx#1^^8d\ifmmode{\acute I}\else{\accent19I}\fi% Í
        \else\ifx#1^^8e\ifmmode{\hat I}\else{\accent94I}\fi% Î
        \else\ifx#1^^8f\ifmmode{\ddot I}\else{\accent"7FI}\fi% Ï
        \else\ifx#1^^91\ifmmode{\tilde N}\else{\accent"7EN}\fi% Ñ
        \else\ifx#1^^92\ifmmode\hbox{\tenit@\accent18O}\else{\accent18O}\fi% Ò
        \else\ifx#1^^93\ifmmode{\acute O}\else{\accent19O}\fi% Ó
        \else\ifx#1^^94\ifmmode{\hat O}\else{\accent94O}\fi% Ô
        \else\ifx#1^^95\ifmmode{\tilde O}\else{\accent"7EO}\fi% Õ
        \else\ifx#1^^96\ifmmode{\ddot O}\else{\accent"7FO}\fi% Ö
        \else\ifx#1^^98\ifmmode\hbox{\tenit@\char"1F}\else\char"1F\fi% \O
        \else\ifx#1^^99\ifmmode\hbox{\tenit@\accent18U}\else{\accent18U}\fi% Ù
        \else\ifx#1^^9a\ifmmode{\acute U}\else{\accent19U}\fi% Ú
        \else\ifx#1^^9b\ifmmode{\hat U}\else{\accent94U}\fi% Û
        \else\ifx#1^^9c\ifmmode{\ddot U}\else{\accent"7FU}\fi% Ü
        \else\ifx#1^^9d\ifmmode{\acute Y}\else{\accent19Y}\fi% Ý
        \else\ifx#1^^a0\ifmmode\hbox{\tenit@\accent18a}\else{\accent18a}\fi% à
        \else\ifx#1^^a1\ifmmode{\acute a}\else{\accent19a}\fi% á
        \else\ifx#1^^a2\ifmmode{\hat a}\else{\accent94a}\fi% â
        \else\ifx#1^^a3\ifmmode{\tilde a}\else{\accent"7Ea}\fi% ã
        \else\ifx#1^^a4\ifmmode{\ddot a}\else{\accent"7Fa}\fi% ä
        \else\ifx#1^^a5\ifmmode\hbot{\tenit@\aa}\else\aa{}\fi
        \else\ifx#1^^a6\ifmmode\hbox{\tenit@\char"1A}\else\char"1A\fi%
        \else\ifx#1^^a7\ifmmode\hbox{\tenit@\c c}\else\c c\fi
        \else\ifx#1^^a8\ifmmode\hbox{\tenit@\accent18e}\else{\accent18e}\fi% è
        \else\ifx#1^^a9\ifmmode{\acute e}\else{\accent19e}\fi% é
        \else\ifx#1^^aa\ifmmode{\hat e}\else{\accent94e}\fi% ê
        \else\ifx#1^^ab\ifmmode{\ddot e}\else{\accent"7Fe}\fi% ë
        \else\ifx#1^^ac\ifmmode\hbox{\tenit@\accent18\i}\else{\accent18\i}\fi% ì
        \else\ifx#1^^ad\ifmmode\hbox{\tenit@\accent19\i}\else{\accent19\i}\fi% í
        \else\ifx#1^^ae\ifmmode\hbox{\tenit@\accent94\i}\else{\accent94\i}\fi% î
        \else\ifx#1^^af\ifmmode\hbox{\tenit@\accent"7F\i}\else{\accent"7F\i}\fi% ï
        \else\ifx#1^^b1\ifmmode{\tilde n}\else{\accent"7En}\fi% ñ
        \else\ifx#1^^b2\ifmmode\hbox{\tenit@\accent18o}\else{\accent18o}\fi% ò
        \else\ifx#1^^b3\ifmmode{\acute o}\else{\accent19o}\fi% ó
        \else\ifx#1^^b4\ifmmode{\hat o}\else{\accent94o}\fi% ô
        \else\ifx#1^^b5\ifmmode{\tilde o}\else{\accent"7Eo}\fi% õ
        \else\ifx#1^^b6\ifmmode{\ddot o}\else{\accent"7Fo}\fi% ö
        \else\ifx#1^^b8\ifmmode\hbox{\tenit@\char"1C}\else\char"1C\fi% \o
        \else\ifx#1^^b9\ifmmode\hbox{\tenit@\accent18u}\else{\accent18u}\fi% ù
        \else\ifx#1^^ba\ifmmode{\acute u}\else{\accent19u}\fi% ú
        \else\ifx#1^^bb\ifmmode{\hat u}\else{\accent94u}\fi% û
        \else\ifx#1^^bc\ifmmode{\ddot u}\else{\accent"7Fu}\fi% ü
        \else\ifx#1^^bd\ifmmode{\acute y}\else{\accent19y}\fi% ý
        \else\ifx#1^^bf\ifmmode{\ddot y}\else{\accent"7FY}\fi% ÿ
  \fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi
  \fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi
  \fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi\fi}


% Código que passa os padrões de separação silábica da língua
% portuguesa:
\patterns{1ba1 1be1 1bi1 1bo1 1bu1 1ca1 1ce1 1ci1 1co1 1cu1
          1da1 1de1 1di1 1do1 1du1 1fa1 1fe1 1fi1 1fo1 1fu1
          1ga1 1ge1 1gi1 1go1 1gu1 1ha1 1he1 1hi1 1ho1 1hu1
          1ja1 1je1 1ji1 1jo1 1ju1 1ka1 1ke1 1ki1 1ko1 1ku1
          1la1 1le1 1li1 1lo1 1lu1 1ma1 1me1 1mi1 1mo1 1mu1
          1na1 1ne1 1ni1 1no1 1nu1 1pa1 1pe1 1pi1 1po1 1pu1
          1qua1 1que1 1qui1 1quo1 1ra1 1re1 1ri1 1ro1 1ru1
          1sa1 1se1 1si1 1so1 1su1 1ta1 1te1 1ti1 1to1 1tu1
          1va1 1ve1 1vi1 1vo1 1vu1 1wa1 1we1 1wi1 1wo1 1wu1
          1xa1 1xe1 1xi1 1xo1 1xu1 1za1 1ze1 1zi1 1zo1 1zu1}


% Permitindo inserir acentos soltos, sem caracteres por meio
% de \~, \^, etc. Estes comandos são diferentes do Plain TeX, pois não
% receberão argumentos:
\def\~{\accent"7E\ }\def\"{\accent"7F\ }\def\'{\accent19\ }
\def\^{\accent94\ }\def\`{\accent18\ }
% Enter e Tab serão espaços:
\def\^^M{\ }
\def\^^I{\ }

% O comando para terminar um documento é \fim:
\def\fim{\par\vfill\supereject\end}

% E definimos os nomes de inserções:
\def\footins@{254}
\def\topins@{253}

% Comandos de espaçamento
\def\lacuna#1{\ifvmode\vskip#1\relax\else\hskip#1\relax\fi}
\def\espaco#1{{\dimen0=#1\divide\dimen0 by 3\ifvmode\vskip#1
          plus\dimen0 minus\dimen0\else\hskip#1 plus\dimen0
          minus\dimen0\relax\fi}}
\def\quad{\hskip1em\relax}
\def\qquad{\hskip2em\relax}

% Comandos \TeX e \MaGiTeX:
\def\TeX{T\kern-.1667em\lower.5ex\hbox{E}\kern-.125emX}
\def\MaGiTeX{M\kern-0.15em\lower0.5ex\hbox{A}\kern-0.25emG\lower
        0.5ex\hbox{I}\kern-0.1em\TeX}

% Os nomes internos das fontes em magitex devem ser
% reservados. Somente projetistas de formatos deveriam lidar com tais
% modificações
\defaulthyphenchar=`\- % O caractere de separação silábica deve ser
                       % setado antes.
\font\tenit@=cmti10 % text italic
\font\tensl@=cmsl10 % slanted roman
\font\tenrm@=cmr10 % roman text (mudar o nome \tenrm gera problemas)
\font\tenbf@=cmbx10 % boldface extended
\font\tentt@=cmtt10 % typewriter
\font\teni@=cmmi10 % math italic
\font\tensy@=cmsy10 % math symbols
\font\tenex@=cmex10 % math extension
\font\sevenrm@=cmr7 % Usado em subscritos e sobrescritos
\font\fiverm@=cmr5 % Usado em subsubscritos e sobresobrescritos
\font\seveni@=cmmi7 % Sobrescritos e subscritos matemáticos
\font\fivei@=cmmi5 % Subsubscritos itálicos
\font\sevensy@=cmsy7 % Símbolos subscritos
\font\fivesy@=cmsy5 % Símbolos subsubscritos
\font\sevenbf@=cmbx7 % Subscritos negritos
\font\fivebf@=cmbx5 % Subsubscritos negritos

% Comandos de estilo de escrita. Colocando correção itálica
% automaticamente se necessário.
% TODO: #2 precisa ser mesmo opcional abaixo:
\long\def\italico#1{\let\proxi=\}\def\func{\if\prox\}[VAZIO]\else[NAO-VAZIO]\fi}\futurelet\prox\func}
%{\def\func{\if\prox.\relax\else\if\prox,\relax\else\/\fi\fi}\fam4\tenit@#1\futurelet\prox\func#2\par}}
\long\def\romano#1{{\fam0\tenrm@ #1}}
\long\def\negrito#1{{\fam6\tenbf@ #1}}
\long\def\inclinado#1#2{{\fam5\tensl@ #1\ifx#2.#2\else\ifx#2,#2\else\/#2\fi\fi}}
\long\def\monoespaco#1{{\fam7\tentt@ #1}}

% Comandos de justificação e texto:
\def\alinhaesquerda{\rightskip 0em plus 2em \leftskip 0pt \spaceskip.3333em%
     \xspaceskip.5em\relax}
%\def\alinhaversoesquerdo{\obeylines\rightskip\hfil\leftskip0pt\xspaceskip0pt%
%     \relax}
\def\alinhadireita{\leftskip 0em plus 2em \rightskip0pt \spaceskip.3333em%
     \xspaceskip.5em\relax}
\def\alinhacentro{\rightskip 0em plus 2em \leftskip 0em plus 2em%
                  \spaceskip.3333em \xspaceskip.5em\relax}
\def\alinhanormal{\leftskip0pt\rightskip0pt\spaceskip0pt\xspaceskip0pt\relax}

% Magitex não interage com usuário via prompt em caso de erro:
\nonstopmode

% Conversão para caracteres maiúsculos e minúsculos:
\def\maiusculo{\uppercase}
\def\minusculo{\lowercase}

% Comandos de datas:
\def\ano{\the\year}
\def\mes{\the\month}
\def\dia{\the\day}

% Inserção de novos arquivos:
\def\insere#1{\input #1}

% O número da página:
\def\pagina{\the\pageno@}

% Gera uma linha horizontal:
\def\linha{{\hrule}}

% Útil para testarmos se algum argumento é vazio
\def\vazio@{}

% Definições matemáticas do Plain TeX:
\def\lmoustache{\delimiter"437A340 } % top from (, bottom from )
\def\rmoustache{\delimiter"537B341 } % top from ), bottom from (
\def\lgroup{\delimiter"462833A } % extensible ( with sharper tips
\def\rgroup{\delimiter"562933B } % extensible ) with sharper tips
\def\arrowvert{\delimiter"26A33C } % arrow without arrowheads
\def\Arrowvert{\delimiter"26B33D } % double arrow without arrowheads
\def\bracevert{\delimiter"77C33E } % the vertical bar that extends braces
\def\Vert{\delimiter"26B30D } \let\|=\Vert
\def\vert{\delimiter"26A30C }
\def\uparrow{\delimiter"3222378 }
\def\downarrow{\delimiter"3223379 }
\def\updownarrow{\delimiter"326C33F }
\def\Uparrow{\delimiter"322A37E }
\def\Downarrow{\delimiter"322B37F }
\def\Updownarrow{\delimiter"326D377 }
\def\backslash{\delimiter"26E30F } % for double coset G\backslash H
\def\rangle{\delimiter"526930B }
\def\langle{\delimiter"426830A }
\def\rbrace{\delimiter"5267309 } \let\}=\rbrace
\def\lbrace{\delimiter"4266308 } \let\{=\lbrace
\def\rceil{\delimiter"5265307 }
\def\lceil{\delimiter"4264306 }
\def\rfloor{\delimiter"5263305 }
\def\lfloor{\delimiter"4262304 }
\def\bmod{\nonscript\mskip-\medmuskip\mkern5mu
  \mathbin{\fam0\tenrm@ mod}\penalty900\mkern5mu\nonscript\mskip-\medmuskip}
\def\pmod#1{\allowbreak\mkern18mu({\fam0\tenrm@ mod}\,\,#1)}
\def\log{\mathop{\fam0\tenrm@ log}\nolimits}
\def\lg{\mathop{\fam0\tenrm@ lg}\nolimits}
\def\ln{\mathop{\fam0\tenrm@ ln}\nolimits}
\def\lim{\mathop{\fam0\tenrm@ lim}}
\def\limsup{\mathop{\fam0\tenrm@ lim\,sup}}
\def\liminf{\mathop{\fam0\tenrm@ lim\,inf}}
\def\sin{\mathop{\fam0\tenrm@ sin}\nolimits}
\def\arcsin{\mathop{\fam0\tenrm@ arcsin}\nolimits}
\def\sinh{\mathop{\fam0\tenrm@ sinh}\nolimits}
\def\cos{\mathop{\fam0\tenrm@ cos}\nolimits}
\def\arccos{\mathop{\fam0\tenrm@ arccos}\nolimits}
\def\cosh{\mathop{\fam0\tenrm@ cosh}\nolimits}
\def\tan{\mathop{\fam0\tenrm@ tan}\nolimits}
\def\arctan{\mathop{\fam0\tenrm@ arctan}\nolimits}
\def\tanh{\mathop{\fam0\tenrm@ tanh}\nolimits}
\def\cot{\mathop{\fam0\tenrm@ cot}\nolimits}
\def\coth{\mathop{\fam0\tenrm@ coth}\nolimits}
\def\sec{\mathop{\fam0\tenrm@ sec}\nolimits}
\def\csc{\mathop{\fam0\tenrm@ csc}\nolimits}
\def\max{\mathop{\fam0\tenrm@ max}}
\def\min{\mathop{\fam0\tenrm@ min}}
\def\sup{\mathop{\fam0\tenrm@ sup}}
\def\inf{\mathop{\fam0\tenrm@ inf}}
\def\arg{\mathop{\fam0\tenrm@ arg}\nolimits}
\def\ker{\mathop{\fam0\tenrm@ ker}\nolimits}
\def\dim{\mathop{\fam0\tenrm@ dim}\nolimits}
\def\hom{\mathop{\fam0\tenrm@ hom}\nolimits}
\def\det{\mathop{\fam0\tenrm@ det}}
\def\exp{\mathop{\fam0\tenrm@ exp}\nolimits}
\def\Pr{\mathop{\fam0\tenrm@ Pr}}
\def\gcd{\mathop{\fam0\tenrm@ gcd}}
\def\deg{\mathop{\fam0\tenrm@ deg}\nolimits}
\def\bigl{\mathopen\big}
\def\bigm{\mathrel\big}
\def\bigr{\mathclose\big}
\def\Bigl{\mathopen\Big}
\def\Bigm{\mathrel\Big}
\def\Bigr{\mathclose\Big}
\def\biggl{\mathopen\bigg}
\def\biggm{\mathrel\bigg}
\def\biggr{\mathclose\bigg}
\def\Biggl{\mathopen\Bigg}
\def\Biggm{\mathrel\Bigg}
\def\Biggr{\mathclose\Bigg}
\def\big#1{{\hbox{$\left#1\vbox to8.5pt{}\right.\n@space$}}}
\def\Big#1{{\hbox{$\left#1\vbox to11.5pt{}\right.\n@space$}}}
\def\bigg#1{{\hbox{$\left#1\vbox to14.5pt{}\right.\n@space$}}}
\def\Bigg#1{{\hbox{$\left#1\vbox to17.5pt{}\right.\n@space$}}}
\def\n@space{\nulldelimiterspace\z@ \m@th}
\mathchardef\alpha="010B
\mathchardef\beta="010C
\mathchardef\gamma="010D
\mathchardef\delta="010E
\mathchardef\epsilon="010F
\mathchardef\zeta="0110
\mathchardef\eta="0111
\mathchardef\theta="0112
\mathchardef\iota="0113
\mathchardef\kappa="0114
\mathchardef\lambda="0115
\mathchardef\mu="0116
\mathchardef\nu="0117
\mathchardef\xi="0118
\mathchardef\pi="0119
\mathchardef\rho="011A
\mathchardef\sigma="011B
\mathchardef\tau="011C
\mathchardef\upsilon="011D
\mathchardef\phi="011E
\mathchardef\chi="011F
\mathchardef\psi="0120
\mathchardef\omega="0121
\mathchardef\varepsilon="0122
\mathchardef\vartheta="0123
\mathchardef\varpi="0124
\mathchardef\varrho="0125
\mathchardef\varsigma="0126
\mathchardef\varphi="0127
\mathchardef\Gamma="7000
\mathchardef\Delta="7001
\mathchardef\Theta="7002
\mathchardef\Lambda="7003
\mathchardef\Xi="7004
\mathchardef\Pi="7005
\mathchardef\Sigma="7006
\mathchardef\Upsilon="7007
\mathchardef\Phi="7008
\mathchardef\Psi="7009
\mathchardef\Omega="700A
\mathchardef\aleph="0240
\def\hbar{{\mathchar'26\mkern-9muh}}
\mathchardef\imath="017B
\mathchardef\jmath="017C
\mathchardef\ell="0160
\mathchardef\wp="017D
\mathchardef\Re="023C
\mathchardef\Im="023D
\mathchardef\partial="0140
\mathchardef\infty="0231
\mathchardef\prime="0230
\mathchardef\emptyset="023B
\mathchardef\nabla="0272
\def\surd{{\mathchar"1270}}
\mathchardef\top="023E
\mathchardef\bot="023F
\def\angle{{\vbox{\ialign{$\m@th\scriptstyle##$\crcr
      \not\mathrel{\mkern14mu}\crcr
      \noalign{\prevdepth-1000pt}
      \mkern2.5mu\leaders\hrule height.34pt\hfill\mkern2.5mu\crcr}}}}
\mathchardef\triangle="0234
\mathchardef\forall="0238
\mathchardef\exists="0239
\mathchardef\neg="023A \let\lnot=\neg
\mathchardef\flat="015B
\mathchardef\natural="015C
\mathchardef\sharp="015D
\mathchardef\clubsuit="027C
\mathchardef\diamondsuit="027D
\mathchardef\heartsuit="027E
\mathchardef\spadesuit="027F
\mathchardef\coprod="1360
\mathchardef\bigvee="1357
\mathchardef\bigwedge="1356
\mathchardef\biguplus="1355
\mathchardef\bigcap="1354
\mathchardef\bigcup="1353
\mathchardef\intop="1352 \def\int{\intop\nolimits}
\mathchardef\prod="1351
\mathchardef\sum="1350
\mathchardef\bigotimes="134E
\mathchardef\bigoplus="134C
\mathchardef\bigodot="134A
\mathchardef\ointop="1348 \def\oint{\ointop\nolimits}
\mathchardef\bigsqcup="1346
\mathchardef\smallint="1273
\mathchardef\triangleleft="212F
\mathchardef\triangleright="212E
\mathchardef\bigtriangleup="2234
\mathchardef\bigtriangledown="2235
\mathchardef\wedge="225E \let\land=\wedge
\mathchardef\vee="225F \let\lor=\vee
\mathchardef\cap="225C
\mathchardef\cup="225B
\mathchardef\ddagger="227A
\mathchardef\dagger="2279
\mathchardef\sqcap="2275
\mathchardef\sqcup="2274
\mathchardef\uplus="225D
\mathchardef\amalg="2271
\mathchardef\diamond="2205
\mathchardef\bullet="220F
\mathchardef\wr="226F
\mathchardef\div="2204
\mathchardef\odot="220C
\mathchardef\oslash="220B
\mathchardef\otimes="220A
\mathchardef\ominus="2209
\mathchardef\oplus="2208
\mathchardef\mp="2207
\mathchardef\pm="2206
\mathchardef\circ="220E
\mathchardef\bigcirc="220D
\mathchardef\setminus="226E % for set difference A\setminus B
\mathchardef\cdot="2201
\mathchardef\ast="2203
\mathchardef\times="2202
\mathchardef\star="213F
\mathchardef\propto="322F
\mathchardef\sqsubseteq="3276
\mathchardef\sqsupseteq="3277
\mathchardef\parallel="326B
\mathchardef\mid="326A
\mathchardef\dashv="3261
\mathchardef\vdash="3260
\mathchardef\nearrow="3225
\mathchardef\searrow="3226
\mathchardef\nwarrow="322D
\mathchardef\swarrow="322E
\mathchardef\Leftrightarrow="322C
\mathchardef\Leftarrow="3228
\mathchardef\Rightarrow="3229
\def\neq{\not=} \let\ne=\neq
\mathchardef\leq="3214 \let\le=\leq
\mathchardef\geq="3215 \let\ge=\geq
\mathchardef\succ="321F
\mathchardef\prec="321E
\mathchardef\approx="3219
\mathchardef\succeq="3217
\mathchardef\preceq="3216
\mathchardef\supset="321B
\mathchardef\subset="321A
\mathchardef\supseteq="3213
\mathchardef\subseteq="3212
\mathchardef\in="3232
\mathchardef\ni="3233 \let\owns=\ni
\mathchardef\gg="321D
\mathchardef\ll="321C
\mathchardef\not="3236
\mathchardef\leftrightarrow="3224
\mathchardef\leftarrow="3220 \let\gets=\leftarrow
\mathchardef\rightarrow="3221 \let\to=\rightarrow
\mathchardef\mapstochar="3237 \def\mapsto{\mapstochar\rightarrow}
\mathchardef\sim="3218
\mathchardef\simeq="3227
\mathchardef\perp="323F
\mathchardef\equiv="3211
\mathchardef\asymp="3210
\mathchardef\smile="315E
\mathchardef\frown="315F
\mathchardef\leftharpoonup="3128
\mathchardef\leftharpoondown="3129
\mathchardef\rightharpoonup="312A
\mathchardef\rightharpoondown="312B

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% O código abaixo é do Plain TeX e está aqui como referência. Ele será %%%
% substituído por código novo (ou não) à medida que o MAgiTeX se       %%%
% desenvolver                                                          %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% And here's a different sort of allocation:
% For example, \newif\iffoo creates \footrue, \foofalse to go with \iffoo.
\outer\def\newif#1{\count@\escapechar \escapechar-1
  \expandafter\expandafter\expandafter
   \def\@if#1{true}{\let#1=\iftrue}%
  \expandafter\expandafter\expandafter
   \def\@if#1{false}{\let#1=\iffalse}%
  \@if#1{false}\escapechar\count@} % the condition starts out false
\def\@if#1#2{\csname\expandafter\if@\string#1#2\endcsname}
{\uccode`1=`i \uccode`2=`f \uppercase{\gdef\if@12{}}} % `if' is required


\message{more fonts,}
% Additional \preloaded fonts can be specified here.
% (And those that were \preloaded above can be eliminated.)

\skewchar\teni@='177 \skewchar\seveni@='177 \skewchar\fivei@='177
\skewchar\tensy@='60 \skewchar\sevensy@='60 \skewchar\fivesy@='60

\textfont0=\tenrm@ \scriptfont0=\sevenrm@ \scriptscriptfont0=\fiverm@
\textfont1=\teni@ \scriptfont1=\seveni@ \scriptscriptfont1=\fivei@
\def\mit{\fam1} \def\oldstyle{\fam1\teni@}
\textfont2=\tensy@ \scriptfont2=\sevensy@ \scriptscriptfont2=\fivesy@
\def\cal{\fam2}
\textfont3=\tenex@ \scriptfont3=\tenex@ \scriptscriptfont3=\tenex@
\textfont4=\tenit@
\textfont5=\tensl@
\textfont6=\tenbf@ \scriptfont6=\sevenbf@
\scriptscriptfont6=\fivebf@
\textfont7=\tentt@


% Macros for setting ordinary text

\let\endline=\cr

\def\space{ }
\def\null{\hbox{}}

\let\bgroup={ \let\egroup=}

% In \obeylines, we say `\let^^M=\par' instead of `\def^^M{\par}'
% since this allows, for example, `\let\par=\cr \obeylines \halign{...'
{\catcode`\^^M=13 % these lines must end with %
  \gdef\obeylines{\catcode`\^^M13 \let^^M\par}%
  \global\let^^M\par} % this is in case ^^M appears in a \write
\def\obeyspaces{\catcode`\ 13}
{\obeyspaces\global\let =\space}

\def\loop#1\repeat{\def\body{#1}\iterate}
\def\iterate{\body \let\next\iterate \else\let\next\relax\fi \next}
\let\repeat=\fi % this makes \loop...\if...\repeat skippable


\def\offinterlineskip{\baselineskip-1000pt
  \lineskip0pt \lineskiplimit16383.99999pt} % Dimensão máxima

\def\vglue{\afterassignment\vgl@\skip@=}
\def\vgl@{\par \dimen@\prevdepth \hrule height0pt
  \nobreak\vskip\skip@ \prevdepth\dimen@}
\def\hglue{\afterassignment\hgl@\skip@=}
\def\hgl@{\leavevmode \count@\spacefactor \vrule width0pt
  \nobreak\hskip\skip@ \spacefactor\count@}

\def\slash{/\penalty\exhyphenpenalty} % a `/' that acts like a `-'

\def\break{\penalty-10000}
\def\nobreak{\penalty 10000}
\def\allowbreak{\penalty 0}

\def\filbreak{\par\vfil\penalty-200\vfilneg}
\def\goodbreak{\par\penalty-500 }
\def\eject{\par\break}
\def\supereject{\par\penalty-20000}

\def\removelastskip{\ifdim\lastskip=0pt\else\vskip-\lastskip\fi}
\def\smallbreak{\par\ifdim\lastskip<3pt plus 1pt minus 1pt
  \removelastskip\penalty-50\smallskip\fi}
\def\medbreak{\par\ifdim\lastskip<6pt plus 2pt minus 2pt
  \removelastskip\penalty-100\medskip\fi}
\def\bigbreak{\par\ifdim\lastskip<12pt plus 4pt minus 4pt
  \removelastskip\penalty-200\bigskip\fi}

\def\rlap#1{\hbox to0pt{#1\hss}}
\def\llap#1{\hbox to0pt{\hss#1}}

\def\m@th{\mathsurround0pt}
\def\underbar#1{$\setbox0\hbox{#1}\dp0=0pt
  \m@th \underline{\box0}$}


\def\strut{\relax\ifmmode\copy\strutbox\else\unhcopy\strutbox\fi}

\def\hidewidth{\hskip\hideskip} % for alignment entries that can stick out
\def\ialign{\everycr{}\tabskip\z@skip\halign} % initialized \halign
\def\multispan#1{\omit \mscount#1\relax
  \loop\ifnum\mscount>1 \sp@n\repeat}
\def\sp@n{\span\omit\advance\mscount-1}

\newif\ifus@ \newif\if@cr


\def\cleartabs{\global\setbox\tabsyet\null \setbox\tabs\null}
\def\settabs{\setbox\tabs\null \futurelet\next\sett@b}
\let\+=\relax % in case this file is being read in twice
\def\sett@b{\ifx\next\+\def\nxt{\afterassignment\s@tt@b\let\nxt}%
  \else\let\nxt\s@tcols\fi \let\next\relax \nxt}
\def\s@tt@b{\let\nxt\relax \us@false\m@ketabbox}
\def\tabalign{\us@true\m@ketabbox} % non-\outer version of \+
\outer\def\+{\tabalign}
\def\s@tcols#1\columns{\count@#1\dimen@\hsize
  \loop\ifnum\count@>0 \@nother \repeat}
\def\@nother{\dimen@ii\dimen@ \divide\dimen@ii\count@
  \setbox\tabs\hbox{\hbox to\dimen@ii{}\unhbox\tabs}%
  \advance\dimen@-\dimen@ii \advance\count@-1}

\def\m@ketabbox{\begingroup
  \global\setbox\tabsyet\copy\tabs
  \global\setbox\tabsdone\null
  \def\cr{\@crtrue\crcr\egroup\egroup
    \ifus@\unvbox0\lastbox\fi\endgroup
    \setbox\tabs\hbox{\unhbox\tabsyet\unhbox\tabsdone}}%
  \setbox0\vbox\bgroup\@crfalse
    \ialign\bgroup&\t@bbox##\t@bb@x\crcr}

\def\t@bbox{\setbox0\hbox\bgroup}
\def\t@bb@x{\if@cr\egroup % now \box0 holds the column
  \else\hss\egroup \global\setbox\tabsyet\hbox{\unhbox\tabsyet
      \global\setbox1\lastbox}% now \box1 holds its size
    \ifvoid1\global\setbox1\hbox to\wd0{}%
    \else\setbox0\hbox to\wd1{\unhbox0}\fi
    \global\setbox\tabsdone\hbox{\box1\unhbox\tabsdone}\fi
  \box0}

\def\hang{\hangindent\parindent}
\def\textindent#1{\indent\llap\kern.5em \ignorespaces}
\def\item{\par\hang\textindent}
\def\itemitem{\par\indent \hangindent2\parindent \textindent}
\def\narrower{\advance\leftskip\parindent
  \advance\rightskip\parindent}

\outer\def\beginsection#1\par{\vskip0pt plus.3\vsize\penalty-250
  \vskip0pt plus-.3\vsize\bigskip\vskip\parskip
  \message{#1}\line{{\fam6\tenbf@#1}\hss}\nobreak\smallskip\noindent}
\outer\def\proclaim #1. #2\par{\medbreak
  \noindent{\fam6\tenbf@#1.\kern.5em }{\fam5\tensl@#2\par}%
  \ifdim\lastskip<6pt plus 2pt minus 2pt \removelastskip\penalty55\medskip\fi}

\def\ttraggedright{\fam7\tentt@\rightskip0pt plus2em\relax} % for use with \tt only

\chardef\%=`\%
\chardef\&=`\&
\chardef\#=`\#
\chardef\$=`\$
\chardef\ss="19
\chardef\oe="1B
\chardef\OE="1E
\chardef\i="10 \chardef\j="11 % dotless letters
\def\aa{\accent23a}
\def\l{\char32l}
\def\L{\leavevmode\setbox0\hbox{L}\hbox to\wd0{\hss\char32L}}

\def\leavevmode{\unhbox\voidb@x} % begins a paragraph, if necessary
\def\_{\leavevmode \kern.06em \vbox{\hrule width.3em}}
\def\AA{\leavevmode\setbox0\hbox{!}\dimen@\ht0\advance\dimen@-1ex%
  \rlap{\raise.67\dimen@\hbox{\char'27}}A}

\def\mathhexbox#1#2#3{\leavevmode
  \hbox{$\m@th \mathchar"#1#2#3$}}
\def\dag{\mathhexbox279}
\def\ddag{\mathhexbox27A}
\def\S{\mathhexbox278}
\def\P{\mathhexbox27B}
\def\Orb{\mathhexbox20D}

\def\oalign#1{\leavevmode\vtop{\baselineskip\z@skip \lineskip.25ex%
  \ialign{##\crcr#1\crcr}}} \def\o@lign{\lineskiplimit0pt \oalign}
\def\ooalign{\lineskiplimit-16383.99999pt \oalign} % chars over each
                                % other (dimensão máxima)
{\catcode`p=12 \catcode`t=12 \gdef\\#1pt{#1}} \let\getf@ctor=\\
\def\sh@ft#1{\dimen@#1\kern\expandafter\getf@ctor\the\fontdimen1\font
  \dimen@} % kern by #1 times the current slant
\def\d#1{{\o@lign{\relax#1\crcr\hidewidth\sh@ft{-1ex}.\hidewidth}}}
\def\b#1{{\o@lign{\relax#1\crcr\hidewidth\sh@ft{-3ex}%
    \vbox to.2ex{\hbox{\char22}\vss}\hidewidth}}}
\def\c#1{{\setbox0\hbox{#1}\ifdim\ht0=1ex\accent24 #1%
  \else\ooalign{\unhbox0\crcr\hidewidth\char24\hidewidth}\fi}}
\def\copyright{{\ooalign{\hfil\raise.07ex\hbox{c}\hfil\crcr\Orb}}}

\def\dots{\relax\ifmmode\ldots\else$\m@th\ldots\,$\fi}

\def\v#1{{\accent20 #1}} \let\^^_=\v
\def\u#1{{\accent21 #1}} \let\^^S=\u
\def\=#1{{\accent22 #1}}
\def\.#1{{\accent95 #1}}
\def\H#1{{\accent"7D #1}}
\def\t#1{{\edef\next{\the\font}\the\textfont1\accent"7F\next#1}}

\def\hrulefill{\leaders\hrule\hfill}
\def\dotfill{\cleaders\hbox{$\m@th \mkern1.5mu.\mkern1.5mu$}\hfill}
\def\rightarrowfill{$\m@th\smash-\mkern-7mu%
  \cleaders\hbox{$\mkern-2mu\smash-\mkern-2mu$}\hfill
  \mkern-7mu\mathord\rightarrow$}
\def\leftarrowfill{$\m@th\mathord\leftarrow\mkern-7mu%
  \cleaders\hbox{$\mkern-2mu\smash-\mkern-2mu$}\hfill
  \mkern-7mu\smash-$}
\mathchardef\braceld="37A \mathchardef\bracerd="37B
\mathchardef\bracelu="37C \mathchardef\braceru="37D
\def\downbracefill{$\m@th \setbox0\hbox{$\braceld$}%
  \braceld\leaders\vrule height\ht0 depth0pt\hfill\braceru
  \bracelu\leaders\vrule height\ht0 depth0pt\hfill\bracerd$}
\def\upbracefill{$\m@th \setbox0\hbox{$\braceld$}%
  \bracelu\leaders\vrule height\ht0 depth0pt\hfill\bracerd
  \braceld\leaders\vrule height\ht0 depth0pt\hfill\braceru$}

% Macros for math setting
\message{math definitions,}

\let\sp=^ \let\sb=_
\def\,{\mskip\thinmuskip}
\def\>{\mskip\medmuskip}
\def\;{\mskip\thickmuskip}
\def\!{\mskip-\thinmuskip}
\def\*{\discretionary{\vskip3pt plus 1pt minus 1pt\the\textfont2\char2}{}{}}
{\catcode`\'=13 \gdef'{^\bgroup\prim@s}}
\def\prim@s{\prime\futurelet\next\pr@m@s}
\def\pr@m@s{\ifx'\next\let\nxt\pr@@@s \else\ifx^\next\let\nxt\pr@@@t
  \else\let\nxt\egroup\fi\fi \nxt}
\def\pr@@@s#1{\prim@s} \def\pr@@@t#1#2{#2\egroup}
{\catcode`\^^Z=13 \gdef^^Z{\not=}} % ^^Z is like \ne in math

{\catcode`\_=13 \global\let_=\_} % _ in math is either subscript or \_


\def\joinrel{\mathrel{\mkern-3mu}}
\def\relbar{\mathrel{\smash-}} % \smash, because - has the same height as +
\def\Relbar{\mathrel=}
\mathchardef\lhook="312C \def\hookrightarrow{\lhook\joinrel\rightarrow}
\mathchardef\rhook="312D \def\hookleftarrow{\leftarrow\joinrel\rhook}
\def\bowtie{\mathrel\triangleright\joinrel\mathrel\triangleleft}
\def\models{\mathrel|\joinrel=}
\def\Longrightarrow{\Relbar\joinrel\Rightarrow}
\def\longrightarrow{\relbar\joinrel\rightarrow}
\def\longleftarrow{\leftarrow\joinrel\relbar}
\def\Longleftarrow{\Leftarrow\joinrel\Relbar}
\def\longmapsto{\mapstochar\longrightarrow}
\def\longleftrightarrow{\leftarrow\joinrel\rightarrow}
\def\Longleftrightarrow{\Leftarrow\joinrel\Rightarrow}
\def\iff{\;\Longleftrightarrow\;}

\mathchardef\ldotp="613A % ldot as a punctuation mark
\mathchardef\cdotp="6201 % cdot as a punctuation mark
\mathchardef\colon="603A % colon as a punctuation mark
\def\ldots{\mathinner{\ldotp\ldotp\ldotp}}
\def\cdots{\mathinner{\cdotp\cdotp\cdotp}}
\def\vdots{\vbox{\baselineskip4pt \lineskiplimit0pt
    \kern6pt\hbox{.}\hbox{.}\hbox{.}}}
\def\ddots{\mathinner{\mkern1mu\raise7pt\vbox{\kern7pt\hbox{.}}\mkern2mu
    \raise4pt\hbox{.}\mkern2mu\raise1pt\hbox{.}\mkern1mu}}

\def\acute{\mathaccent"7013 }
\def\grave{\mathaccent"7012 }
\def\ddot{\mathaccent"707F }
\def\tilde{\mathaccent"707E }
\def\bar{\mathaccent"7016 }
\def\breve{\mathaccent"7015 }
\def\check{\mathaccent"7014 }
\def\hat{\mathaccent"705E }
\def\vec{\mathaccent"017E }
\def\dot{\mathaccent"705F }
\def\widetilde{\mathaccent"0365 }
\def\widehat{\mathaccent"0362 }
\def\overrightarrow#1{\vbox{\m@th\ialign{##\crcr
      \rightarrowfill\crcr\noalign{\kern-1pt\prevdepth-1000pt}
      $\hfil\displaystyle{#1}\hfil$\crcr}}}
\def\overleftarrow#1{\vbox{\m@th\ialign{##\crcr
      \leftarrowfill\crcr\noalign{\kern-1pt\prevdepth-1000pt}
      $\hfil\displaystyle{#1}\hfil$\crcr}}}
\def\overbrace#1{\mathop{\vbox{\m@th\ialign{##\crcr\noalign{\kern3pt}
      \downbracefill\crcr\noalign{\kern3pt\prevdepth-1000pt}
      $\hfil\displaystyle{#1}\hfil$\crcr}}}\limits}
\def\underbrace#1{\mathop{\vtop{\m@th\ialign{##\crcr
      $\hfil\displaystyle{#1}\hfil$\crcr\noalign{\kern3pt\prevdepth-1000pt}
      \upbracefill\crcr\noalign{\kern3pt}}}}\limits}
\def\skew#1#2#3{{\muskip0pt#1mu\divide\muskip\z@2 \mkern\muskip\z@
    #2{\mkern-\muskip\z@{#3}\mkern\muskip\z@}\mkern-\muskip\z@}{}}


\def\choose{\atopwithdelims()}
\def\brack{\atopwithdelims[]}
\def\brace{\atopwithdelims\{\}}

\def\sqrt{\radical"270370 }

\def\mathpalette#1#2{\mathchoice{#1\displaystyle{#2}}%
  {#1\textstyle{#2}}{#1\scriptstyle{#2}}{#1\scriptscriptstyle{#2}}}
\def\root#1\of{\setbox\rootbox
  \hbox{$\m@th\scriptscriptstyle{#1}$}\mathpalette\r@@t}
\def\r@@t#1#2{\setbox\z@\hbox{$\m@th#1\sqrt{#2}$}\dimen@\ht\z@
  \advance\dimen@-\dp\z@
  \mkern5mu\raise.6\dimen@\copy\rootbox \mkern-10mu\box\z@}
\newif\ifv@ \newif\ifh@
\def\vphantom{\v@true\h@false\ph@nt}
\def\hphantom{\v@false\h@true\ph@nt}
\def\phantom{\v@true\h@true\ph@nt}
\def\ph@nt{\ifmmode\def\next{\mathpalette\mathph@nt}%
  \else\let\next\makeph@nt\fi\next}
\def\makeph@nt#1{\setbox\z@\hbox{#1}\finph@nt}
\def\mathph@nt#1#2{\setbox\z@\hbox{$\m@th#1{#2}$}\finph@nt}
\def\finph@nt{\setbox2\null
  \ifv@ \ht2\ht\z@ \dp2\dp\z@\fi
  \ifh@ \wd2\wd\z@\fi \box2}
\def\mathstrut{\vphantom(}
\def\smash{\relax % \relax, in case this comes first in \halign
  \ifmmode\def\next{\mathpalette\mathsm@sh}\else\let\next\makesm@sh
  \fi\next}
\def\makesm@sh#1{\setbox\z@\hbox{#1}\finsm@sh}
\def\mathsm@sh#1#2{\setbox\z@\hbox{$\m@th#1{#2}$}\finsm@sh}
\def\finsm@sh{\ht\z@\z@ \dp\z@\z@ \box\z@}

\def\cong{\mathrel{\mathpalette\@vereq\sim}} % congruence sign
\def\@vereq#1#2{\lower.5pt\vbox{\lineskiplimit16383.99999pt\lineskip-.5pt% dimensão maxima
    \ialign{$\m@th#1\hfil##\hfil$\crcr#2\crcr=\crcr}}}
\def\notin{\mathrel{\mathpalette\c@ncel\in}}
\def\c@ncel#1#2{\m@th\ooalign{$\hfil#1\mkern1mu/\hfil$\crcr$#1#2$}}
\def\rightleftharpoons{\mathrel{\mathpalette\rlh@{}}}
\def\rlh@#1{\vcenter{\m@th\hbox{\ooalign{\raise2pt
          \hbox{$#1\rightharpoonup$}\crcr
        $#1\leftharpoondown$}}}}
\def\buildrel#1\over#2{\mathrel{\mathop{\kern\z@#2}\limits^{#1}}}
\def\doteq{\buildrel\textstyle.\over=}

\def\cases#1{\left\{\,\vcenter{\lineskip1pt
  \baselineskip12pt \lineskiplimit0pt\m@th
    \ialign{$##\hfil$&\quad##\hfil\crcr#1\crcr}}\right.}
\def\matrix#1{\null\,\vcenter{\lineskip1pt
  \baselineskip12pt \lineskiplimit0pt\m@th
    \ialign{\hfil$##$\hfil&&\quad\hfil$##$\hfil\crcr
      \mathstrut\crcr\noalign{\kern-\baselineskip}
      #1\crcr\mathstrut\crcr\noalign{\kern-\baselineskip}}}\,}
\def\pmatrix#1{\left(\matrix{#1}\right)}
\setbox0=\hbox{\tenex@ B} \p@renwd=\wd0 % width of the big left (
\def\bordermatrix#1{\begingroup \m@th
  \setbox\z@\vbox{\def\cr{\crcr\noalign{\kern2pt\global\let\cr\endline}}%
    \ialign{$##$\hfil\kern2pt\kern\p@renwd&\vskip3pt plus 1pt minus 1pt\hfil$##$\hfil
      &&\quad\hfil$##$\hfil\crcr
      \omit\strut\hfil\crcr\noalign{\kern-\baselineskip}%
      #1\crcr\omit\strut\cr}}%
  \setbox2\vbox{\unvcopy\z@\global\setbox1\lastbox}%
  \setbox2\hbox{\unhbox1\unskip\global\setbox1\lastbox}%
  \setbox2\hbox{$\kern\wd1\kern-\p@renwd\left(\kern-\wd1
    \global\setbox1\vbox{\box1\kern2pt}%
    \vcenter{\kern-\ht1\unvbox\z@\kern-\baselineskip}\,\right)$}%
  \null\;\vbox{\kern\ht1\box2}\endgroup}

\def\openup{\afterassignment\@penup\dimen@=}
\def\@penup{\advance\lineskip\dimen@
  \advance\baselineskip\dimen@
  \advance\lineskiplimit\dimen@}
\def\eqalign#1{\null\,\vcenter{\openup\jot\m@th
  \ialign{\strut\hfil$\displaystyle{##}$&$\displaystyle{{}##}$\hfil
      \crcr#1\crcr}}\,}
\newif\ifdt@p
\def\displ@y{\global\dt@ptrue\openup\jot\m@th
  \everycr{\noalign{\ifdt@p \global\dt@pfalse \ifdim\prevdepth>-1000pt
      \vskip-\lineskiplimit \vskip0pt \fi
      \else \penalty100 \fi}}}
\def\@lign{\tabskip\z@skip\everycr{}} % restore inside \displ@y
\def\displaylines#1{\displ@y \tabskip\z@skip
  \halign{\hbox to\displaywidth{$\@lign\hfil\displaystyle##\hfil$}\crcr
    #1\crcr}}
\def\eqalignno#1{\displ@y \tabskip\centering
  \halign to\displaywidth{\hfil$\@lign\displaystyle{##}$\tabskip\z@skip
    &$\@lign\displaystyle{{}##}$\hfil\tabskip\centering
    &\llap{$\@lign##$}\tabskip\z@skip\crcr
    #1\crcr}}
\def\leqalignno#1{\displ@y \tabskip\centering
  \halign to\displaywidth{\hfil$\@lign\displaystyle{##}$\tabskip\z@skip
    &$\@lign\displaystyle{{}##}$\hfil\tabskip\centering
    &\kern-\displaywidth\rlap{$\@lign##$}\tabskip\displaywidth\crcr
    #1\crcr}}

% Definitions related to output

\message{output routines,}

\newif\ifr@ggedbottom
\def\raggedbottom{\topskip 10pt plus60pt \r@ggedbottomtrue}
\def\normalbottom{\topskip 10pt \r@ggedbottomfalse} % undoes \raggedbottom
\def\folio{\ifnum\pageno@<\z@ \romannumeral-\pageno@ \else\number\pageno@ \fi}
\def\nopagenumbers{\footline{\hfil}} % blank out the footline


\def\footnote#1{\let\@sf\empty % parameter #2 (the text) is read later
  \ifhmode\edef\@sf{\spacefactor\the\spacefactor}\/\fi
  #1\@sf\vfootnote{#1}}
\def\vfootnote#1{\insert\footins@\bgroup
  \interlinepenalty100
  \splittopskip\ht\strutbox % top baseline for broken footnotes
  \splitmaxdepth\dp\strutbox \floatingpenalty20000
  \leftskip\z@skip \rightskip\z@skip \spaceskip\z@skip \xspaceskip\z@skip
  \textindent{#1}\footstrut\futurelet\next\fo@t}
\def\fo@t{\ifcat\bgroup\noexpand\next \let\next\f@@t
  \else\let\next\f@t\fi \next}
\def\f@@t{\bgroup\aftergroup\@foot\let\next}
\def\f@t#1{#1\@foot}
\def\@foot{\strut\egroup}
\def\footstrut{\vbox to\splittopskip{}}
\skip\footins@=12pt plus 4pt minus 4pt % space added when footnote is present
\count\footins@=1000 % footnote magnification factor (1 to 1)
\dimen\footins@=8in % maximum footnotes per page

\newif\ifp@ge \newif\if@mid
\def\topinsert{\@midfalse\p@gefalse\@ins}
\def\midinsert{\@midtrue\@ins}
\def\pageinsert{\@midfalse\p@getrue\@ins}
\skip\topins@=\z@skip % no space added when a topinsert is present
\count\topins@=1000 % magnification factor (1 to 1)
\dimen\topins@=16383.99999pt % (dimensão máxima) no limit per page
\def\@ins{\par\begingroup\setbox\z@\vbox\bgroup} % start a \vbox
\def\endinsert{\egroup % finish the \vbox
  \if@mid \dimen@\ht\z@ \advance\dimen@\dp\z@ \advance\dimen@12pt
    \advance\dimen@\pagetotal \advance\dimen@-\pageshrink
    \ifdim\dimen@>\pagegoal\@midfalse\p@gefalse\fi\fi
  \if@mid \bigskip\box\z@\bigbreak
  \else\insert\topins@{\penalty100 % floating insertion
    \splittopskip\z@skip
    \splitmaxdepth16383.99999pt \floatingpenalty\z@% (max dimen)
    \ifp@ge \dimen@\dp\z@
    \vbox to\vsize{\unvbox\z@\kern-\dimen@}% depth is zero
    \else \box\z@\nobreak\bigskip\fi}\fi\endgroup}

\fam0\tenrm@ % select roman font
\catcode`@=12 % at signs are no longer letters

\dump
